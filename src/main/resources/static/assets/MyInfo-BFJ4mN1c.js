import{d as V,q as E,r as m,c as _,a,k as l,v as x,h as d,i as p,j as U,l as b,F as k,b as q,x as M,E as w,_ as B}from"./index-DeSWxAP-.js";const D={class:"my-info-container"},F=V({__name:"MyInfo",setup(z){const i=E(),f=m(),r=m({username:"",phone:"",ID_number:""}),y=m({phone:[{required:!0,message:"请输入手机号码",trigger:"blur"},{pattern:/^\d{11}$/,message:"请输入正确的手机号码",trigger:["blur","change"]}],ID_number:[{required:!0,message:"请输入身份证号码",trigger:"blur"},{pattern:/^[0-9xX]{18}$/,message:"请输入正确的身份证号码",trigger:["blur","change"]}],username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:10,message:"用户名长度在 2 到 10 个字符",trigger:["blur","change"]}]});async function g(){const{phone:s,username:e,ID_number:t}=await i.getUserInfo(!0);r.value={phone:s,username:e,ID_number:t}}g();const o=m(!0);function c(){var s;(s=f.value)==null||s.validate(async e=>{var t;e&&(await M({...r.value,uId:(t=await i.getUserInfo())==null?void 0:t.id}),w.success("修改成功！正在刷新..."),o.value=!0,i.triggerUserUpdateStatus(),g())})}return(s,e)=>{const t=d("ElInput"),u=d("ElFormItem"),v=d("ElButton"),I=d("ElForm");return p(),_("div",D,[a(I,{onSubmit:x(c,["prevent"]),ref_key:"formRef",ref:f,"label-width":"auto",model:r.value,rules:y.value},{default:l(()=>[a(u,{required:!1,label:"用户名",prop:"username"},{default:l(()=>[a(t,{size:"large",readonly:o.value,modelValue:r.value.username,"onUpdate:modelValue":e[0]||(e[0]=n=>r.value.username=n),modelModifiers:{trim:!0}},null,8,["readonly","modelValue"])]),_:1}),a(u,{required:!1,label:"手机号",prop:"phone"},{default:l(()=>[a(t,{size:"large",readonly:o.value,modelValue:r.value.phone,"onUpdate:modelValue":e[1]||(e[1]=n=>r.value.phone=n),modelModifiers:{trim:!0}},null,8,["readonly","modelValue"])]),_:1}),a(u,{required:!1,label:"证件号",prop:"ID_number"},{default:l(()=>[a(t,{size:"large",readonly:o.value,modelValue:r.value.ID_number,"onUpdate:modelValue":e[2]||(e[2]=n=>r.value.ID_number=n),modelModifiers:{trim:!0}},null,8,["readonly","modelValue"])]),_:1}),a(u,{label:" "},{default:l(()=>[o.value?(p(),U(v,{key:0,type:"primary",onClick:e[3]||(e[3]=n=>o.value=!1)},{default:l(()=>e[4]||(e[4]=[b("编辑")])),_:1})):(p(),_(k,{key:1},[a(v,{type:"success","native-type":"submit"},{default:l(()=>e[5]||(e[5]=[b("保存")])),_:1}),e[6]||(e[6]=q("span",{style:{color:"#aaa","font-size":"12px","margin-left":"10px"}},"请在上方修改对应信息",-1))],64))]),_:1})]),_:1},8,["model","rules"])])}}}),S=B(F,[["__scopeId","data-v-d00893eb"]]);export{S as default};
